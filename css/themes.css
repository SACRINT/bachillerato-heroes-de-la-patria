/*
==============================================================================
SISTEMA DE TEMAS AVANZADO - BGE HÉROES DE LA PATRIA
==============================================================================
Fase A: Mejoras de Experiencia de Usuario
Variables CSS para modo claro/oscuro con transiciones suaves
==============================================================================
*/

/* ==========================================================================
   VARIABLES GLOBALES DEL SISTEMA DE TEMAS
   ========================================================================== */

:root {
    /* Duración de transiciones */
    --theme-transition-duration: 0.3s;
    --theme-transition-timing: cubic-bezier(0.4, 0, 0.2, 1);

    /* Shadows para diferentes temas */
    --shadow-light: 0 2px 8px rgba(0, 0, 0, 0.1);
    --shadow-medium: 0 4px 16px rgba(0, 0, 0, 0.15);
    --shadow-heavy: 0 8px 32px rgba(0, 0, 0, 0.2);

    /* Border radius consistente */
    --border-radius-sm: 0.375rem;
    --border-radius-md: 0.5rem;
    --border-radius-lg: 0.75rem;
}

/* ==========================================================================
   TEMA CLARO (Por defecto)
   ========================================================================== */

:root,
[data-theme="light"],
.theme-light {
    /* Colores principales */
    --color-primary: #007bff;
    --color-primary-hover: #0056b3;
    --color-primary-light: #e3f2fd;
    --color-secondary: #6c757d;
    --color-success: #28a745;
    --color-warning: #ffc107;
    --color-danger: #dc3545;
    --color-info: #17a2b8;

    /* Backgrounds */
    --bg-primary: #ffffff;
    --bg-secondary: #f8f9fa;
    --bg-tertiary: #e9ecef;
    --bg-card: #ffffff;
    --bg-modal: #ffffff;
    --bg-navbar: #ffffff;
    --bg-footer: #f8f9fa;
    --bg-sidebar: #ffffff;

    /* Texto */
    --text-primary: #212529;
    --text-secondary: #6c757d;
    --text-muted: #adb5bd;
    --text-light: #ffffff;
    --text-dark: #000000;
    --text-inverse: #ffffff;

    /* Bordes */
    --border-primary: #dee2e6;
    --border-secondary: #e9ecef;
    --border-light: #f8f9fa;
    --border-focus: #80bdff;

    /* Sombras */
    --shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    --shadow-md: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.175);
    --shadow-card: var(--shadow-light);
    --shadow-modal: var(--shadow-heavy);

    /* Estados de hover */
    --hover-bg: rgba(0, 0, 0, 0.05);
    --hover-text: var(--color-primary);

    /* Input y formularios */
    --input-bg: #ffffff;
    --input-border: #ced4da;
    --input-focus-border: #80bdff;
    --input-placeholder: #6c757d;

    /* Botones */
    --btn-primary-bg: var(--color-primary);
    --btn-primary-border: var(--color-primary);
    --btn-primary-hover-bg: var(--color-primary-hover);
    --btn-secondary-bg: var(--color-secondary);
    --btn-light-bg: #f8f9fa;
    --btn-light-text: #212529;

    /* Navegación */
    --navbar-bg: var(--bg-navbar);
    --navbar-text: var(--text-primary);
    --navbar-hover: var(--hover-bg);
    --navbar-shadow: var(--shadow-sm);

    /* Cards y componentes */
    --card-bg: var(--bg-card);
    --card-border: var(--border-primary);
    --card-shadow: var(--shadow-card);

    /* Scrollbar */
    --scrollbar-track: #f1f1f1;
    --scrollbar-thumb: #c1c1c1;
    --scrollbar-thumb-hover: #a8a8a8;
}

/* ==========================================================================
   TEMA OSCURO
   ========================================================================== */

[data-theme="dark"],
.theme-dark {
    /* Colores principales (ajustados para modo oscuro) */
    --color-primary: #4dabf7;
    --color-primary-hover: #339af0;
    --color-primary-light: #1c2331;
    --color-secondary: #adb5bd;
    --color-success: #51cf66;
    --color-warning: #ffd43b;
    --color-danger: #ff6b6b;
    --color-info: #22b8cf;

    /* Backgrounds */
    --bg-primary: #1a1a1a;
    --bg-secondary: #2d3748;
    --bg-tertiary: #4a5568;
    --bg-card: #2d3748;
    --bg-modal: #2d3748;
    --bg-navbar: #1a202c;
    --bg-footer: #1a202c;
    --bg-sidebar: #2d3748;

    /* Texto */
    --text-primary: #f7fafc;
    --text-secondary: #cbd5e0;
    --text-muted: #a0aec0;
    --text-light: #f7fafc;
    --text-dark: #1a202c;
    --text-inverse: #1a202c;

    /* Bordes */
    --border-primary: #4a5568;
    --border-secondary: #2d3748;
    --border-light: #1a202c;
    --border-focus: #4dabf7;

    /* Sombras (más sutiles en modo oscuro) */
    --shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.3);
    --shadow-md: 0 0.5rem 1rem rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.5);
    --shadow-card: 0 4px 12px rgba(0, 0, 0, 0.3);
    --shadow-modal: 0 8px 32px rgba(0, 0, 0, 0.6);

    /* Estados de hover */
    --hover-bg: rgba(255, 255, 255, 0.1);
    --hover-text: var(--color-primary);

    /* Input y formularios */
    --input-bg: #2d3748;
    --input-border: #4a5568;
    --input-focus-border: #4dabf7;
    --input-placeholder: #a0aec0;

    /* Botones */
    --btn-primary-bg: var(--color-primary);
    --btn-primary-border: var(--color-primary);
    --btn-primary-hover-bg: var(--color-primary-hover);
    --btn-secondary-bg: var(--color-secondary);
    --btn-light-bg: #4a5568;
    --btn-light-text: #f7fafc;

    /* Navegación */
    --navbar-bg: var(--bg-navbar);
    --navbar-text: var(--text-primary);
    --navbar-hover: var(--hover-bg);
    --navbar-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);

    /* Cards y componentes */
    --card-bg: var(--bg-card);
    --card-border: var(--border-primary);
    --card-shadow: var(--shadow-card);

    /* Scrollbar */
    --scrollbar-track: #2d3748;
    --scrollbar-thumb: #4a5568;
    --scrollbar-thumb-hover: #718096;
}

/* ==========================================================================
   TRANSICIONES SUAVES ENTRE TEMAS
   ========================================================================== */

.theme-transition,
.theme-transition * {
    transition:
        background-color var(--theme-transition-duration) var(--theme-transition-timing),
        border-color var(--theme-transition-duration) var(--theme-transition-timing),
        color var(--theme-transition-duration) var(--theme-transition-timing),
        box-shadow var(--theme-transition-duration) var(--theme-transition-timing),
        opacity var(--theme-transition-duration) var(--theme-transition-timing) !important;
}

/* ==========================================================================
   APLICACIÓN DE VARIABLES A ELEMENTOS BASE
   ========================================================================== */

/* Body y HTML */
body {
    background-color: var(--bg-primary);
    color: var(--text-primary);
    transition: background-color var(--theme-transition-duration) var(--theme-transition-timing);
}

/* Cards */
.card {
    background-color: var(--card-bg);
    border-color: var(--card-border);
    box-shadow: var(--card-shadow);
}

/* Navegación */
.navbar {
    background-color: var(--navbar-bg) !important;
    box-shadow: var(--navbar-shadow);
}

.navbar-brand,
.navbar-nav .nav-link {
    color: var(--navbar-text) !important;
}

.navbar-nav .nav-link:hover {
    background-color: var(--navbar-hover);
    border-radius: var(--border-radius-sm);
}

/* Botones */
.btn-primary {
    background-color: var(--btn-primary-bg);
    border-color: var(--btn-primary-border);
}

.btn-primary:hover {
    background-color: var(--btn-primary-hover-bg);
}

.btn-light {
    background-color: var(--btn-light-bg);
    color: var(--btn-light-text);
    border-color: var(--border-primary);
}

/* Formularios */
.form-control {
    background-color: var(--input-bg);
    border-color: var(--input-border);
    color: var(--text-primary);
}

.form-control:focus {
    border-color: var(--input-focus-border);
    box-shadow: 0 0 0 0.2rem rgba(77, 171, 247, 0.25);
    background-color: var(--input-bg);
    color: var(--text-primary);
}

.form-control::placeholder {
    color: var(--input-placeholder);
}

/* Modales */
.modal-content {
    background-color: var(--bg-modal);
    color: var(--text-primary);
    border-color: var(--border-primary);
    box-shadow: var(--shadow-modal);
}

.modal-header {
    border-bottom-color: var(--border-primary);
}

.modal-footer {
    border-top-color: var(--border-primary);
}

/* Texto y enlaces */
.text-muted {
    color: var(--text-muted) !important;
}

.text-secondary {
    color: var(--text-secondary) !important;
}

a {
    color: var(--color-primary);
}

a:hover {
    color: var(--color-primary-hover);
}

/* Backgrounds utilitarios */
.bg-light {
    background-color: var(--bg-secondary) !important;
}

.bg-secondary {
    background-color: var(--bg-tertiary) !important;
}

/* Bordes */
.border {
    border-color: var(--border-primary) !important;
}

.border-top {
    border-top-color: var(--border-primary) !important;
}

.border-bottom {
    border-bottom-color: var(--border-primary) !important;
}

/* ==========================================================================
   SCROLLBAR PERSONALIZADA
   ========================================================================== */

/* Webkit browsers */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--scrollbar-track);
}

::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
}

/* Firefox */
* {
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}

/* ==========================================================================
   UTILIDADES ESPECÍFICAS DEL TEMA
   ========================================================================== */

/* Clase para elementos que deben invertir su color en modo oscuro */
.theme-invert {
    filter: invert(1);
}

[data-theme="dark"] .theme-invert {
    filter: invert(0);
}

/* Elementos que solo aparecen en modo claro */
.light-only {
    display: block;
}

[data-theme="dark"] .light-only {
    display: none !important;
}

/* Elementos que solo aparecen en modo oscuro */
.dark-only {
    display: none;
}

[data-theme="dark"] .dark-only {
    display: block !important;
}

/* ==========================================================================
   MEJORAS DE ACCESIBILIDAD Y CONTRASTE
   ========================================================================== */

/* Mejor contraste para enlaces en modo oscuro */
[data-theme="dark"] a {
    color: var(--color-primary);
}

[data-theme="dark"] a:hover {
    color: var(--color-primary-hover);
}

/* Focus visible mejorado para accesibilidad WCAG */
.btn:focus,
.form-control:focus,
a:focus {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
    box-shadow: 0 0 0 3px rgba(77, 171, 247, 0.3);
}

/* Mejora de contraste para texto en cards en modo oscuro */
[data-theme="dark"] .card-text,
[data-theme="dark"] .card-body p {
    color: var(--text-primary);
    line-height: 1.6;
}

/* Mejora de contraste para botones secundarios en modo oscuro */
[data-theme="dark"] .btn-secondary {
    background-color: #6c757d;
    border-color: #6c757d;
    color: #ffffff;
}

[data-theme="dark"] .btn-secondary:hover {
    background-color: #5a6268;
    border-color: #545b62;
}

/* Mejora de contraste para badges y labels */
[data-theme="dark"] .badge {
    background-color: var(--color-primary) !important;
    color: #000000 !important;
}

/* Contraste mejorado para alertas en modo oscuro */
[data-theme="dark"] .alert {
    border-width: 1px;
    border-style: solid;
}

[data-theme="dark"] .alert-info {
    background-color: rgba(34, 184, 207, 0.1);
    border-color: var(--color-info);
    color: #ffffff;
}

[data-theme="dark"] .alert-warning {
    background-color: rgba(255, 212, 59, 0.1);
    border-color: var(--color-warning);
    color: #ffffff;
}

[data-theme="dark"] .alert-danger {
    background-color: rgba(255, 107, 107, 0.1);
    border-color: var(--color-danger);
    color: #ffffff;
}

[data-theme="dark"] .alert-success {
    background-color: rgba(81, 207, 102, 0.1);
    border-color: var(--color-success);
    color: #ffffff;
}

/* Mejora de legibilidad para tablas en modo oscuro */
[data-theme="dark"] .table {
    color: var(--text-primary);
}

[data-theme="dark"] .table-striped > tbody > tr:nth-of-type(odd) > td {
    background-color: rgba(255, 255, 255, 0.05);
}

[data-theme="dark"] .table th {
    border-color: var(--border-primary);
    background-color: var(--bg-tertiary);
}

/* Indicador de modo actual para screen readers */
.theme-indicator {
    position: absolute;
    left: -10000px;
    width: 1px;
    height: 1px;
    overflow: hidden;
}

/* Mejora del contraste de selección de texto */
[data-theme="dark"] ::selection {
    background-color: var(--color-primary);
    color: #000000;
}

[data-theme="dark"] ::-moz-selection {
    background-color: var(--color-primary);
    color: #000000;
}

/* ==========================================================================
   RESPONSIVE DESIGN
   ========================================================================== */

@media (max-width: 768px) {
    /* Ajustes para móvil */
    :root {
        --theme-transition-duration: 0.2s;
    }

    .card {
        box-shadow: var(--shadow-sm);
    }
}

@media (prefers-reduced-motion: reduce) {
    /* Respetar preferencias de movimiento reducido */
    .theme-transition,
    .theme-transition * {
        transition: none !important;
    }

    :root {
        --theme-transition-duration: 0s;
    }
}
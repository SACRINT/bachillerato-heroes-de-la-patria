---
import { siteConfig } from '@heroes-patria/config';

interface Props {
  institutionName?: string;
  customLinks?: Array<{
    name: string;
    href: string;
    icon: string;
  }>;
}

const { 
  institutionName = siteConfig.name,
  customLinks = []
} = Astro.props;

const institutionInfo = {
  name: institutionName,
  subtitle: 'Educación de Excelencia',
  description: siteConfig.description.substring(0, 150) + '...',
  cct: siteConfig.institutional.cct
};

const contactInfo = {
  address: `${siteConfig.contact.address.street}, ${siteConfig.contact.address.city}`,
  phone: siteConfig.contact.phone,
  email: siteConfig.contact.email,
  schedule: siteConfig.schedule.office
};

const socialLinks = [
  {
    name: "Facebook",
    href: siteConfig.social.facebook,
    icon: "fab fa-facebook-f",
    color: "hover:bg-blue-600"
  },
  {
    name: "Instagram", 
    href: siteConfig.social.instagram,
    icon: "fab fa-instagram",
    color: "hover:bg-pink-600"
  },
  {
    name: "YouTube",
    href: siteConfig.social.youtube,
    icon: "fab fa-youtube", 
    color: "hover:bg-red-600"
  },
  {
    name: "Email",
    href: `mailto:${siteConfig.contact.email}`,
    icon: "fas fa-envelope",
    color: "hover:bg-gray-600"
  }
];

const navigationLinks = [
  { name: "Inicio", href: "/", icon: "fas fa-home" },
  { name: "Conócenos", href: "/conocenos#hero", icon: "fas fa-users" },
  { name: "Oferta Educativa", href: "/oferta-educativa#hero", icon: "fas fa-graduation-cap" },
  { name: "Servicios", href: "/servicios#hero", icon: "fas fa-cogs" },
  { name: "Comunidad", href: "/comunidad#hero", icon: "fas fa-heart" },
  { name: "Contacto", href: "/contacto#hero", icon: "fas fa-envelope" }
];

const servicesLinks = [
  { name: "Portal Estudiantes", href: "/estudiantes#hero", icon: "fas fa-user-graduate" },
  { name: "Portal Padres", href: "/padres#hero", icon: "fas fa-users" },
  { name: "Centro de Descargas", href: "/descargas#hero", icon: "fas fa-download" },
  { name: "Bolsa de Trabajo", href: "/bolsa-trabajo#hero", icon: "fas fa-briefcase" },
  { name: "Calendario Escolar", href: "/calendario#hero", icon: "fas fa-calendar-alt" },
  { name: "Sistema de Pagos", href: "/pagos#hero", icon: "fas fa-credit-card" }
];

const currentYear = new Date().getFullYear();
---

<footer class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white relative overflow-hidden">
  <!-- Background decoration -->
  <div class="absolute inset-0 bg-gradient-to-br from-blue-900/20 via-transparent to-yellow-900/20"></div>
  <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-yellow-500"></div>
  
  <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-12 pb-8">
    <!-- Main footer content with cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
      
      <!-- Institution Info Card -->
      <div class="lg:col-span-1">
        <div class="bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 hover:border-blue-500/30 h-full">
          <div class="flex items-start space-x-3 mb-4">
            <div class="flex-shrink-0">
              <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-700 rounded-xl shadow-lg flex items-center justify-center">
                <i class="fas fa-graduation-cap text-white text-lg"></i>
              </div>
            </div>
            <div>
              <h3 class="text-lg font-bold text-white leading-tight">
                {institutionInfo.name}
              </h3>
              <h4 class="text-yellow-400 font-semibold text-sm leading-tight">
                {institutionInfo.subtitle}
              </h4>
            </div>
          </div>
          
          <p class="text-gray-300 text-sm leading-relaxed mb-4">
            <i class="fas fa-quote-left text-blue-400 mr-2"></i>
            {institutionInfo.description}
          </p>
          
          <div class="flex items-center text-xs text-gray-400 mb-6">
            <i class="fas fa-certificate text-yellow-500 mr-2"></i>
            <span>Institución oficial registrada ante la SEP • CCT: {institutionInfo.cct}</span>
          </div>
          
          <!-- Social Links -->
          <div>
            <h5 class="text-white font-semibold text-sm mb-3 flex items-center">
              <i class="fas fa-share-alt mr-2 text-blue-400"></i>
              Síguenos en Redes:
            </h5>
            <div class="flex space-x-2">
              {socialLinks.map((social) => (
                <a
                  href={social.href}
                  target={social.href.startsWith('http') ? '_blank' : undefined}
                  rel={social.href.startsWith('http') ? 'noopener noreferrer' : undefined}
                  class={`w-10 h-10 bg-gray-700 ${social.color} rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110 hover:shadow-lg group`}
                  aria-label={social.name}
                  title={`Síguenos en ${social.name}`}
                >
                  <i class={`${social.icon} text-sm text-gray-300 group-hover:text-white transition-colors duration-200`}></i>
                </a>
              ))}
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation Links Card -->
      <div>
        <div class="bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 hover:border-blue-500/30 h-full">
          <h3 class="text-white font-bold text-sm uppercase tracking-wider mb-4 flex items-center">
            <i class="fas fa-sitemap mr-2 text-blue-400"></i>
            Navegación
          </h3>
          <ul class="space-y-2">
            {navigationLinks.map((link) => (
              <li>
                <a
                  href={link.href}
                  class="flex items-center text-gray-300 hover:text-white hover:bg-gray-700/50 px-3 py-2 rounded-lg transition-all duration-200 text-sm group hover:shadow-md"
                >
                  <i class={`${link.icon} mr-3 text-xs text-blue-400 group-hover:text-blue-300 transition-colors duration-200`}></i>
                  {link.name}
                </a>
              </li>
            ))}
          </ul>
        </div>
      </div>

      <!-- Services Links Card -->
      <div>
        <div class="bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 hover:border-blue-500/30 h-full">
          <h3 class="text-white font-bold text-sm uppercase tracking-wider mb-4 flex items-center">
            <i class="fas fa-concierge-bell mr-2 text-blue-400"></i>
            Servicios Destacados
          </h3>
          <ul class="space-y-2">
            {servicesLinks.map((service) => (
              <li>
                <a
                  href={service.href}
                  class="flex items-center text-gray-300 hover:text-white hover:bg-gray-700/50 px-3 py-2 rounded-lg transition-all duration-200 text-sm group hover:shadow-md"
                >
                  <i class={`${service.icon} mr-3 text-xs text-blue-400 group-hover:text-blue-300 transition-colors duration-200`}></i>
                  {service.name}
                </a>
              </li>
            ))}
          </ul>
        </div>
      </div>

      <!-- Contact Info Card -->
      <div>
        <div class="bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 hover:border-blue-500/30 h-full">
          <h3 class="text-white font-bold text-sm uppercase tracking-wider mb-4 flex items-center">
            <i class="fas fa-map-marker-alt mr-2 text-blue-400"></i>
            Contáctanos
          </h3>
          <div class="space-y-4">
            
            <!-- Address -->
            <div class="contact-info-item">
              <div class="flex items-start space-x-3 p-3 bg-gray-700/30 rounded-lg hover:bg-gray-700/50 transition-all duration-200">
                <div class="flex-shrink-0">
                  <i class="fas fa-map-marker-alt text-blue-400 text-sm mt-1"></i>
                </div>
                <div>
                  <h5 class="text-xs font-semibold text-yellow-400 mb-1">Dirección</h5>
                  <p class="text-gray-300 text-sm leading-relaxed">{contactInfo.address}</p>
                </div>
              </div>
            </div>

            <!-- Phone -->
            <div class="contact-info-item">
              <div class="flex items-start space-x-3 p-3 bg-gray-700/30 rounded-lg hover:bg-gray-700/50 transition-all duration-200">
                <div class="flex-shrink-0">
                  <i class="fas fa-phone text-green-400 text-sm mt-1"></i>
                </div>
                <div>
                  <h5 class="text-xs font-semibold text-yellow-400 mb-1">Teléfono</h5>
                  <a href={`tel:${contactInfo.phone}`} class="text-gray-300 hover:text-green-400 text-sm transition-colors duration-200">
                    {contactInfo.phone}
                  </a>
                </div>
              </div>
            </div>

            <!-- Email -->
            <div class="contact-info-item">
              <div class="flex items-start space-x-3 p-3 bg-gray-700/30 rounded-lg hover:bg-gray-700/50 transition-all duration-200">
                <div class="flex-shrink-0">
                  <i class="fas fa-envelope text-purple-400 text-sm mt-1"></i>
                </div>
                <div>
                  <h5 class="text-xs font-semibold text-yellow-400 mb-1">Correo Electrónico</h5>
                  <a 
                    href={`mailto:${contactInfo.email}`} 
                    class="text-gray-300 hover:text-purple-400 text-sm transition-colors duration-200 break-all"
                  >
                    {contactInfo.email}
                  </a>
                </div>
              </div>
            </div>

            <!-- Schedule -->
            <div class="contact-info-item">
              <div class="flex items-start space-x-3 p-3 bg-gray-700/30 rounded-lg hover:bg-gray-700/50 transition-all duration-200">
                <div class="flex-shrink-0">
                  <i class="fas fa-clock text-orange-400 text-sm mt-1"></i>
                </div>
                <div>
                  <h5 class="text-xs font-semibold text-yellow-400 mb-1">Horario de Atención</h5>
                  <p class="text-gray-300 text-sm">{contactInfo.schedule}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Divider -->
    <div class="border-t border-gray-700 my-8"></div>

    <!-- Bottom section -->
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
      <div class="mb-4 lg:mb-0">
        <div class="flex items-center text-sm text-gray-400 mb-2">
          <i class="fas fa-copyright mr-2"></i>
          <span>{currentYear} {siteConfig.name} - Todos los derechos reservados</span>
        </div>
        <div class="text-xs text-gray-500">
          <span class="text-yellow-400 font-medium">Desarrollado con tecnología moderna</span>
        </div>
      </div>
      
      <div class="flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-6 text-sm">
        <a 
          href="/privacidad" 
          class="text-gray-400 hover:text-blue-400 transition-colors duration-200"
        >
          Política de Privacidad
        </a>
        <a 
          href="/terminos" 
          class="text-gray-400 hover:text-blue-400 transition-colors duration-200"
        >
          Términos y Condiciones
        </a>
      </div>
    </div>

    <!-- Back to Top Button -->
    <button
      id="back-to-top"
      class="fixed bottom-6 right-6 w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 opacity-0 invisible hover:scale-110 z-40"
      aria-label="Volver arriba"
    >
      <i class="fas fa-arrow-up text-sm"></i>
    </button>
  </div>

  <!-- Floating decorative elements -->
  <div class="absolute top-10 right-10 w-20 h-20 bg-gradient-to-br from-blue-500/10 to-yellow-500/10 rounded-full blur-xl animate-pulse"></div>
  <div class="absolute bottom-10 left-10 w-16 h-16 bg-gradient-to-br from-yellow-500/10 to-blue-500/10 rounded-full blur-xl animate-pulse" style="animation-delay: 1s;"></div>
</footer>

<!-- Footer Scripts -->
<script>
  // Back to top functionality
  const backToTopButton = document.getElementById('back-to-top');
  
  // Show/hide back to top button
  window.addEventListener('scroll', () => {
    if (window.scrollY > 300) {
      backToTopButton?.classList.remove('opacity-0', 'invisible');
      backToTopButton?.classList.add('opacity-100', 'visible');
    } else {
      backToTopButton?.classList.add('opacity-0', 'invisible');
      backToTopButton?.classList.remove('opacity-100', 'visible');
    }
  });

  // Smooth scroll to top
  backToTopButton?.addEventListener('click', () => {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });

  // Enhanced link interactions
  const footerLinks = document.querySelectorAll('footer a[href^="/"], footer a[href^="#"]');
  
  footerLinks.forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      
      // Handle anchor links for smooth scrolling
      if (href?.startsWith('#')) {
        e.preventDefault();
        const target = document.querySelector(href);
        
        if (target) {
          target.scrollIntoView({ 
            behavior: 'smooth',
            block: 'start'
          });
        }
      }
    });
  });

  // Analytics tracking (placeholder)
  const trackFooterClick = (linkText: string, href: string) => {
    // TODO: Implement analytics tracking
    console.log(`Footer link clicked: ${linkText} -> ${href}`);
  };

  // Add click tracking to all footer links
  footerLinks.forEach(link => {
    link.addEventListener('click', () => {
      const linkText = link.textContent?.trim() || '';
      const href = link.getAttribute('href') || '';
      trackFooterClick(linkText, href);
    });
  });
</script>

<style>
  /* Custom animations for footer elements */
  @keyframes pulse-glow {
    0%, 100% {
      opacity: 0.1;
      transform: scale(1);
    }
    50% {
      opacity: 0.2;
      transform: scale(1.05);
    }
  }

  .animate-pulse {
    animation: pulse-glow 3s ease-in-out infinite;
  }

  /* Smooth transitions for all interactive elements */
  footer a,
  footer button {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Card enhancements */
  footer .bg-gradient-to-br {
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  /* Contact info items styling */
  .contact-info-item .flex:hover {
    transform: translateY(-1px);
  }

  /* Card hover effects */
  footer .border-gray-700:hover {
    border-color: rgba(59, 130, 246, 0.3);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }

  /* Gradient overlay for cards */
  footer .bg-gradient-to-br::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, transparent 50%, rgba(234, 179, 8, 0.05) 100%);
    border-radius: 1rem;
    pointer-events: none;
  }

  /* Icon color animations */
  footer .text-blue-400,
  footer .text-green-400,
  footer .text-purple-400,
  footer .text-orange-400,
  footer .text-yellow-500 {
    transition: all 0.3s ease;
  }

  /* Enhanced hover states */
  footer a:hover {
    text-shadow: 0 0 8px currentColor;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    footer .grid {
      gap: 1.5rem;
    }
    
    footer h3 {
      font-size: 0.875rem;
    }
    
    footer .bg-gradient-to-br {
      padding: 1rem;
    }
    
    .back-to-top {
      bottom: 1rem;
      right: 1rem;
      width: 2.5rem;
      height: 2.5rem;
    }
    
    .contact-info-item .flex {
      padding: 0.75rem;
    }
  }

  /* Dark mode enhancements */
  @media (prefers-color-scheme: dark) {
    footer .bg-gradient-to-br {
      background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
    }
  }
</style>